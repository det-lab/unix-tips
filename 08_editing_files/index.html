
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../07_searching_inside_files/">
      
      
        <link rel="next" href="../09_shell_scripts/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Editing Files - Working with the Unix Shell</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#editing-files-with-sed-and-ed" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Working with the Unix Shell" class="md-header__button md-logo" aria-label="Working with the Unix Shell" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Working with the Unix Shell
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Editing Files
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Working with the Unix Shell" class="md-nav__button md-logo" aria-label="Working with the Unix Shell" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Working with the Unix Shell
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_summary_and_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_navigation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Navigation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_command_history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command History
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_file_operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File Operations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_creating_example_files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_searching_for_files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Searching for Files
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_searching_inside_files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Searching in Files
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Editing Files
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Editing Files
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-sed" class="md-nav__link">
    <span class="md-ellipsis">
      Using sed
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using sed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-isuffix-in-placesuffix" class="md-nav__link">
    <span class="md-ellipsis">
      -i[SUFFIX]/--in-place[SUFFIX]
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-n-quiet-silent" class="md-nav__link">
    <span class="md-ellipsis">
      -n/--quiet/--silent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-e-script-expressionscript" class="md-nav__link">
    <span class="md-ellipsis">
      -e script/--expression=script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-f-script-file-filescript-file" class="md-nav__link">
    <span class="md-ellipsis">
      -f script-file/--file=script-file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-e-r-regexp-extended" class="md-nav__link">
    <span class="md-ellipsis">
      -E/-r/--regexp-extended
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-s-separate" class="md-nav__link">
    <span class="md-ellipsis">
      -s/--separate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-ed" class="md-nav__link">
    <span class="md-ellipsis">
      Using ed
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using ed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addressing-lines-in-ed" class="md-nav__link">
    <span class="md-ellipsis">
      Addressing Lines in ed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_shell_scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shell Scripting
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-sed" class="md-nav__link">
    <span class="md-ellipsis">
      Using sed
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using sed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-isuffix-in-placesuffix" class="md-nav__link">
    <span class="md-ellipsis">
      -i[SUFFIX]/--in-place[SUFFIX]
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-n-quiet-silent" class="md-nav__link">
    <span class="md-ellipsis">
      -n/--quiet/--silent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-e-script-expressionscript" class="md-nav__link">
    <span class="md-ellipsis">
      -e script/--expression=script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-f-script-file-filescript-file" class="md-nav__link">
    <span class="md-ellipsis">
      -f script-file/--file=script-file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-e-r-regexp-extended" class="md-nav__link">
    <span class="md-ellipsis">
      -E/-r/--regexp-extended
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-s-separate" class="md-nav__link">
    <span class="md-ellipsis">
      -s/--separate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-ed" class="md-nav__link">
    <span class="md-ellipsis">
      Using ed
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using ed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#addressing-lines-in-ed" class="md-nav__link">
    <span class="md-ellipsis">
      Addressing Lines in ed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Commands
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="editing-files-with-sed-and-ed">Editing Files with <code>sed</code> and <code>ed</code></h1>
<p>While graphical or full-screen editors like <code>nano</code>, <code>vim</code>, and <code>emacs</code> are interactive, Unix also provides <strong>stream-based</strong> and <strong>line-based</strong> editors that are ideal for scripting or batch processing. Two of the most powerful tools for this are <code>sed</code> and <code>ed</code>.</p>
<h2 id="using-sed">Using <code>sed</code></h2>
<p><code>sed</code> works by reading a file line-by-line and applying transformation rules, often in the form of substitutions, deletions, or insertions. It is especially useful for making changes to large files or automating repetitive edits.</p>
<p>The basic syntax of <code>sed</code> follows:</p>
<pre><code class="language-bash">sed [OPTIONS] 'COMMANDS' filename
</code></pre>
<p>When replacing/substituting text using <code>sed</code>, the general format of the <code>'COMMAND'</code> should follow:</p>
<pre><code class="language-bash">'s/pattern/replacement/[flags]'
</code></pre>
<p>Here, <code>s</code> stands for substitute. This tells <code>sed</code> that the goal is to search and replace. The <code>pattern</code> can then be a word, regex, or a complex pattern. The <code>replacement</code> is then what you are telling <code>sed</code> to replace the <code>pattern</code> with. Finally, <code>[flags]</code> represents the optional modifiers:
| Flag       | Meaning                                 |
|:---        |  ---                                    |
|<code>g</code>         | Global - replace all matches            |
|<code>1,2,...</code>   | Replace only the nth match              |
|<code>p</code>         | Print only the substituded line         |
|<code>I</code>         | Ignore case while searching             |
|<code>e</code>         | Substitude and execute the command line |</p>
<p>If you don't use one of the <code>flags</code> (i.e 's/pattern/replacement/'), it will only replace the first match. You can also use multiple flags in conjunction with one another. For instance, if you wanted to go line by line and replace every instance of a pattern after the third, while also ignoring case, you could use the flag <code>3Ig</code>. For clarity: this would not go from the third in the file on, but from the third in the line on, resetting with each new line. </p>
<p>Let's take a look at how to use some of the more common <code>OPTIONS</code>:</p>
<h3 id="-isuffix-in-placesuffix"><code>-i[SUFFIX]</code>/<code>--in-place[SUFFIX]</code></h3>
<p>This is one of the more vital options, and will often be used alongside others. It allows you to edit files in place, and can also make a backup of the file before creating a change if given the optional <code>SUFFIX</code>. Without including <code>-i</code>, this option will will simply print what given lines <em>would</em> look like if they were edited.</p>
<p>Let's say we want to make an edit to our <code>planets.csv</code> file to have more explicit column names as well. Let's edit the title "Planets" to instead be "Planet Names" while also creating a <code>.bak</code> backup version of the file. <code>sed</code> can accomplish this with the expression:</p>
<pre><code class="language-bash">sed -i.bak 's/Planet/Planet Name/' ./local-universe/milky-way/planets.csv
</code></pre>
<p>After running this, you will then have a new file named <code>planets.csv.bak</code> with the original version of the file, while the change "Planet" <span class="arithmatex">\(\to\)</span> "Planet Name" will be reflected in <code>planets.csv</code>.</p>
<h3 id="-n-quiet-silent"><code>-n</code>/<code>--quiet</code>/<code>--silent</code></h3>
<p>This option supresses the automatic printing of duplicate rows which can be generated by other flags. If used with the <code>/p</code> flag, this option will print only the targeted lines. Let's say you want to preview an edit to <code>galaxies.csv</code> where it is more explicit with the column names, changing "Types" to "Galaxies Types". You could run:</p>
<pre><code class="language-bash">sed -n 's/Type/Galaxy Type/p' ./local-universe/galaxies.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-bash">Galaxy, Constellation, Galaxy Type,
</code></pre>
<p>If you tried to add <code>-i</code> to this expression, it would result in a file that contains only the output line. To edit the line in the file, you would want to remove both <code>-n</code> and <code>/p</code>.</p>
<h3 id="-e-script-expressionscript"><code>-e script</code>/<code>--expression=script</code></h3>
<p>These options allows for us to chain together multiple expressions. Let's say we want to convert the units of the planet radii from <code>m</code> to <code>km</code>. As the planets are all expressed with a radius of either <span class="arithmatex">\(x \times 10^6\)</span>m (xE6) or <span class="arithmatex">\(x \times 10^7\)</span>m (xE7), we could run the following three expressions to make this change:</p>
<pre><code class="language-bash">sed -i -e 's/(m)/(km)/' -e 's/E6/E3/g' -e 's/E7/E4/g' ./local-universe/milky-way/planets.csv
</code></pre>
<h3 id="-f-script-file-filescript-file"><code>-f script-file</code>/<code>--file=script-file</code></h3>
<p>Instead of using <code>-e</code>, we can instead create a script file to read commands. This can be useful for when the number of edits you're trying to make would be cumbersome to type out directly in the command line. Let's say we want to represent the mass of all of the planets in metric tons instead of kilograms (1000 Kg = 1T). We can create a file and fill it with the relevant replacement commands:</p>
<pre><code class="language-bash">nano kilogram-replacement.txt
</code></pre>
<pre><code class="language-bash">s/(Kg)/(T)/
s/E23/E20/g
s/E24/E21/g
s/E25/E22/g
s/E26/E23/g
s/E27/E24/g
</code></pre>
<p>We can then run the expression:</p>
<pre><code class="language-bash">sed -i -f kilogram-replacement.txt ./local-universe/milky-way/planets.csv
</code></pre>
<h3 id="-e-r-regexp-extended"><code>-E</code>/<code>-r</code>/<code>--regexp-extended</code></h3>
<p>These allow for the use of extended regular expressions.</p>
<h3 id="-s-separate"><code>-s</code>/<code>--separate</code></h3>
<p>These allow for you to use <strong>multiple</strong> input files while also treating them as separate inputs. Without it, multiple input files can still be used, but will be treated as one longer stream.</p>
<pre><code class="language-bash">sed -n -s '/Leo/p' ./local-universe/galaxies.csv ./local-universe/milky-way/constellations.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-bash">Leo A, Leo, Irregular
Leo, Regulus,
</code></pre>
<h2 id="using-ed">Using <code>ed</code></h2>
<p>The <code>ed</code> line editor was one of the three original elements of the Unix system (assembler, editor, and shell), and can be used as a more surgical tool for editing files line-by-line. It's especially useful when you know or can find out the exact line numbers you wish to edit or when you want to script out precise edits. For most purposes however, <code>ed</code> is less useful than text-editors such as <code>nano</code> or <code>vim</code>, but it can be very efficient for specific uses with enough planning and forethought.</p>
<p>Editing with <code>ed</code> is accomplished in two distinct modes: <strong>command</strong> and <strong>input</strong>. </p>
<p>Command mode is the default mode when <code>ed</code> is initially invoked. From here, commands are read from the standard input and executed to manipulate the contents of the file. All commands operate on whole lines or ranges of lines. </p>
<p>You can then enter input mode by inputting a command, such as <code>a</code> (append), <code>i</code> (insert), <code>d</code> (delete), or <code>c</code> (change). No commands are available in this mode, and input mode can then be terminated by entering a single period (<code>.</code>) on a line. If using <code>ed</code> to write a new file, you might use <code>a</code> to begin writing a line before ending the line by pressing <code>.</code>.</p>
<p>The format for running <code>ed</code> follows:</p>
<pre><code class="language-ed">ed [OPTIONS] [[+line] file]
ed [OPTIONS] [[+line] '!command [arguments]']
</code></pre>
<p>If the given <code>file</code> starts with a <code>!</code>, then it is interpreted as a shell command, meaning it will read the standard output of the <code>file</code> as if it was executed via the shell. If the file's name begins with a <code>!</code> then (and isn't filled with commands you want to run), simply prefix the name with <code>./</code>. </p>
<h3 id="addressing-lines-in-ed">Addressing Lines in <code>ed</code></h3>
<p>The file name can also be preceded by <code>+line</code> to set the current line to a specified line number (such as <code>1</code>). This will default to the last line if the number given exceeds the number of lines in the file. It is also important to note that <code>ed</code> indexes lines starting from <code>1</code> instead of <code>0</code>.</p>
<p>The <code>file</code> may also be preceded by <code>+/re</code> instead of the line number in order to set the current line as the first line which matches a given regular expression, <code>re</code>. <code>?re</code> sets the current line to the final line which matches the given regular expression.</p>
<p>To summarize, most <code>ed</code> commands operate on <code>line</code> addresses. These can look like:</p>
<ul>
<li>
<p>A specific line number: <code>5</code></p>
</li>
<li>
<p>A range of lines: <code>1,5</code></p>
</li>
<li>
<p>The current line: <code>.</code></p>
</li>
<li>
<p>The last line: <code>$</code></p>
</li>
<li>
<p>Relative lines: <code>.-1</code>, <code>.+2</code></p>
</li>
<li>
<p>A regex match: <code>/pattern/</code> (forward), <code>?pattern?</code> (backwards)</p>
</li>
</ul>
<h3 id="basic-commands">Basic Commands</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>a</code></td>
<td>Append text after current line</td>
</tr>
<tr>
<td><code>i</code></td>
<td>Insert text before current line</td>
</tr>
<tr>
<td><code>d</code></td>
<td>Delete current line</td>
</tr>
<tr>
<td><code>p</code></td>
<td>Print current line</td>
</tr>
<tr>
<td><code>w</code></td>
<td>Write the buffer to a file</td>
</tr>
<tr>
<td><code>q</code></td>
<td>Quit the editor</td>
</tr>
<tr>
<td>### Interacting with a file</td>
<td></td>
</tr>
<tr>
<td>Let's try to make some changes again to our <code>planets.csv</code> file. To begin, simply type <code>ed</code> followed by the file path:</td>
<td></td>
</tr>
</tbody>
</table>
<pre><code class="language-bash">ed ./local-universe/milky-way/planets.csv
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-bash">288
</code></pre>
<p>In this output, <code>ed</code> is telling us that it has read 288 characters into the editor buffer. Now, we can print out all of the lines of the file by running:</p>
<pre><code>,p
</code></pre>
<p>Here, <code>,</code> is the <strong>line range address</strong>, and is equivalent to typing <code>1,$</code>, meaning "from the first line to the last line". The <code>p</code> then is the <strong>command</strong>: print the specified lines.
<strong>Output:</strong></p>
<pre><code class="language-ed">Planet, Radius (km), Distance (AU), Mass (T),
Mercury, 2.44E3, 0.39, 3.29E20,
Venus, 6.05E3, 0.72, 4.87E21,
Earth, 6.37E3, 1, 5.97E21,
Mars, 3.39E3, 1.52, 6.42E20,
Jupiter, 7.15E4, 5.2, 1.90E24,
Saturn, 6.03E4, 9.54, 5.69E23,
Uranus, 2.56E4, 19.2, 8.68E22,
Neptune, 2.48E4, 30.1, 1.02E23
</code></pre>
<p>Now let's say we want to edit the file to change some of the Roman planet names to be their Greek counterparts and then print our changes. We can do this using similar commands to <code>sed</code>:</p>
<pre><code class="language-ed">2s/Mercury/Hermes/
3s/Venus/Aphrodite/
5s/Mars/Ares/
6s/Jupiter/Zeus/
,p
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-ed">Planet, Radius (km), Distance (AU), Mass (T),
Hermes, 2.44E3, 0.39, 3.29E20,
Aphrodite, 6.05E3, 0.72, 4.87E21,
Earth, 6.37E3, 1, 5.97E21,
Ares, 3.39E3, 1.52, 6.42E20,
Zeus, 7.15E4, 5.2, 1.90E24,
Saturn, 6.03E4, 9.54, 5.69E23,
Uranus, 2.56E4, 19.2, 8.68E22,
Neptune, 2.48E4, 30.1, 1.02E23
</code></pre>
<p>Now let's say we want to make an addition to the file - let's add the dwarf planets Ceres and Pluto:</p>
<pre><code class="language-ed">5a
Ceres, 469.7, 2.77, 9.3839E17
.
Pluto, 1.19E3, 49.3, 1.3E19,
</code></pre>
<p>Let's also be sure to add a <code>,</code> to the end of Neptune's line:</p>
<pre><code class="language-ed">10s/$/,/
</code></pre>
<p>Now we can check our work again by running <code>,p</code>:</p>
<pre><code class="language-ed">Planet, Radius (km), Distance (AU), Mass (T),
Hermes, 2.44E3, 0.39, 3.29E20,
Aphrodite, 6.05E3, 0.72, 4.87E21,
Earth, 6.37E3, 1, 5.97E21,
Ares, 3.39E3, 1.52, 6.42E20,
Ceres, 469.7, 2.77, 9.38E17,
Jupiter, 7.15E4, 5.2, 1.90E24,
Saturn, 6.03E4, 9.54, 5.69E23,
Uranus, 2.56E4, 19.2, 8.68E22,
Neptune, 2.48E4, 30.1, 1.02E23,
Pluto, 1.19E3, 49.3, 1.3E19,
</code></pre>
<p>Now we can save our work and exit <code>ed</code> by writing the changes to our file and quiting:</p>
<pre><code class="language-ed">w
q
</code></pre>
<hr />
<p>Now that we have a basic understanding of using <code>sed</code> and <code>ed</code>, let's start putting all of our work together so that we can do some of what Unix is best at: scripting. <a href="../09_shell_scripts/">Click here to continue on to the next section.</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>